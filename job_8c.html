<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>librsync: job.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <!-- ad -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- librsync -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3547096055927362"
         data-ad-slot="8322976738"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">librsync
   &#160;<span id="projectnumber">2.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">job.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic state-machine interface.  
<a href="#details">More...</a></p>

<p><a href="job_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa05e9eb2fa0de9efc5ed1973108ea37f"><td class="memItemLeft" align="right" valign="top"><a id="aa05e9eb2fa0de9efc5ed1973108ea37f"></a>
static <a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rs_job_work</b> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job, <a class="el" href="librsync_8h.html#abf9f543dbfe5c1e60c8ed1c93d087767">rs_buffers_t</a> *buffers)</td></tr>
<tr class="separator:aa05e9eb2fa0de9efc5ed1973108ea37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a262d37e4e571921cd50a02c39909e293"><td class="memItemLeft" align="right" valign="top"><a id="a262d37e4e571921cd50a02c39909e293"></a>
<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>rs_job_new</b> (char const *job_name, <a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>(*statefn)(<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *))</td></tr>
<tr class="separator:a262d37e4e571921cd50a02c39909e293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a550e44fd028431b13ed1b46575ef63e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="job_8c.html#a550e44fd028431b13ed1b46575ef63e2">rs_job_free</a> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job)</td></tr>
<tr class="memdesc:a550e44fd028431b13ed1b46575ef63e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate job state.  <a href="job_8c.html#a550e44fd028431b13ed1b46575ef63e2">More...</a><br /></td></tr>
<tr class="separator:a550e44fd028431b13ed1b46575ef63e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a448b74276640368ab2515228df40ce36"><td class="memItemLeft" align="right" valign="top"><a id="a448b74276640368ab2515228df40ce36"></a>
static <a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rs_job_complete</b> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job, <a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a> result)</td></tr>
<tr class="separator:a448b74276640368ab2515228df40ce36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637e42431bf4df09af378c5a1efa60f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="job_8c.html#a637e42431bf4df09af378c5a1efa60f0">rs_job_iter</a> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job, <a class="el" href="librsync_8h.html#abf9f543dbfe5c1e60c8ed1c93d087767">rs_buffers_t</a> *buffers)</td></tr>
<tr class="memdesc:a637e42431bf4df09af378c5a1efa60f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a <a class="el" href="structrs__job.html" title="The contents of this structure are private.">rs_job</a> state machine until it blocks (<a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253af2d289bbc65678b4b00f56a2e6632957" title="Blocked waiting for more data.">RS_BLOCKED</a>), returns an error, or completes (<a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253a739063053a289b5c3393d78cc77b41b2" title="Completed successfully.">RS_DONE</a>).  <a href="job_8c.html#a637e42431bf4df09af378c5a1efa60f0">More...</a><br /></td></tr>
<tr class="separator:a637e42431bf4df09af378c5a1efa60f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e39c59dc69b031fd47d446d84df560"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="librsync_8h.html#a576eccd11a2696cb46140d5e43c83d7e">rs_stats_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="job_8c.html#a36e39c59dc69b031fd47d446d84df560">rs_job_statistics</a> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job)</td></tr>
<tr class="memdesc:a36e39c59dc69b031fd47d446d84df560"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a pointer to the statistics in a job.  <a href="job_8c.html#a36e39c59dc69b031fd47d446d84df560">More...</a><br /></td></tr>
<tr class="separator:a36e39c59dc69b031fd47d446d84df560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988c1786e04a3e0a9fdcb8cc495aea84"><td class="memItemLeft" align="right" valign="top"><a id="a988c1786e04a3e0a9fdcb8cc495aea84"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>rs_job_input_is_ending</b> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job)</td></tr>
<tr class="separator:a988c1786e04a3e0a9fdcb8cc495aea84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad2866da9b65cf2f7a59b51dc44bf51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="job_8c.html#a5ad2866da9b65cf2f7a59b51dc44bf51">rs_job_drive</a> (<a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *job, <a class="el" href="librsync_8h.html#abf9f543dbfe5c1e60c8ed1c93d087767">rs_buffers_t</a> *buf, <a class="el" href="librsync_8h.html#ae06d064f9f33a459a589d2eb1fb5b6bc">rs_driven_cb</a> in_cb, void *in_opaque, <a class="el" href="librsync_8h.html#ae06d064f9f33a459a589d2eb1fb5b6bc">rs_driven_cb</a> out_cb, void *out_opaque)</td></tr>
<tr class="memdesc:a5ad2866da9b65cf2f7a59b51dc44bf51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actively process a job, by making callbacks to fill and empty the buffers until the job is done.  <a href="job_8c.html#a5ad2866da9b65cf2f7a59b51dc44bf51">More...</a><br /></td></tr>
<tr class="separator:a5ad2866da9b65cf2f7a59b51dc44bf51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic state-machine interface. </p>
<p>The point of this is that we need to be able to suspend and resume processing at any point at which the buffers may block.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="api_streaming.html">Streaming API</a> </dd>
<dd>
<a class="el" href="job_8c.html#a637e42431bf4df09af378c5a1efa60f0" title="Run a rs_job state machine until it blocks (RS_BLOCKED), returns an error, or completes (RS_DONE).">rs_job_iter()</a> </dd>
<dd>
<a class="el" href="structrs__job.html" title="The contents of this structure are private.">rs_job</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="job_8c_source.html">job.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a550e44fd028431b13ed1b46575ef63e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a550e44fd028431b13ed1b46575ef63e2">&#9670;&nbsp;</a></span>rs_job_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a> rs_job_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate job state. </p>

<p class="definition">Definition at line <a class="el" href="job_8c_source.html#l00066">66</a> of file <a class="el" href="job_8c_source.html">job.c</a>.</p>

</div>
</div>
<a id="a637e42431bf4df09af378c5a1efa60f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637e42431bf4df09af378c5a1efa60f0">&#9670;&nbsp;</a></span>rs_job_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a> rs_job_iter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#abf9f543dbfe5c1e60c8ed1c93d087767">rs_buffers_t</a> *&#160;</td>
          <td class="paramname"><em>buffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a <a class="el" href="structrs__job.html" title="The contents of this structure are private.">rs_job</a> state machine until it blocks (<a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253af2d289bbc65678b4b00f56a2e6632957" title="Blocked waiting for more data.">RS_BLOCKED</a>), returns an error, or completes (<a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253a739063053a289b5c3393d78cc77b41b2" title="Completed successfully.">RS_DONE</a>). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>Description of job state.</td></tr>
    <tr><td class="paramname">buffers</td><td>Pointer to structure describing input and output buffers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253" title="Return codes from nonblocking rsync operations.">rs_result</a> that caused iteration to stop.</dd></dl>
<p><code>buffers-&gt;eof_in</code> should be true if there is no more data after what's in the input buffer. The final block checksum will run across whatever's in there, without trying to accumulate anything else.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="api_streaming.html">Streaming API</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="job_8c_source.html#l00093">93</a> of file <a class="el" href="job_8c_source.html">job.c</a>.</p>

</div>
</div>
<a id="a36e39c59dc69b031fd47d446d84df560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e39c59dc69b031fd47d446d84df560">&#9670;&nbsp;</a></span>rs_job_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="librsync_8h.html#a576eccd11a2696cb46140d5e43c83d7e">rs_stats_t</a>* rs_job_statistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a pointer to the statistics in a job. </p>

<p class="definition">Definition at line <a class="el" href="job_8c_source.html#l00142">142</a> of file <a class="el" href="job_8c_source.html">job.c</a>.</p>

</div>
</div>
<a id="a5ad2866da9b65cf2f7a59b51dc44bf51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad2866da9b65cf2f7a59b51dc44bf51">&#9670;&nbsp;</a></span>rs_job_drive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="librsync_8h.html#a7feb858ceba3b8f3cf048d49be108253">rs_result</a> rs_job_drive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#add6622b38e3fa557301a190876d5ed4a">rs_job_t</a> *&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#abf9f543dbfe5c1e60c8ed1c93d087767">rs_buffers_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#ae06d064f9f33a459a589d2eb1fb5b6bc">rs_driven_cb</a>&#160;</td>
          <td class="paramname"><em>in_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>in_opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="librsync_8h.html#ae06d064f9f33a459a589d2eb1fb5b6bc">rs_driven_cb</a>&#160;</td>
          <td class="paramname"><em>out_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>out_opaque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actively process a job, by making callbacks to fill and empty the buffers until the job is done. </p>

<p class="definition">Definition at line <a class="el" href="job_8c_source.html#l00152">152</a> of file <a class="el" href="job_8c_source.html">job.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<!-- ad -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- librsync -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3547096055927362"
     data-ad-slot="8322976738"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-71109100-1', 'auto');
  ga('send', 'pageview');
</script>
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 10 2021 15:04:34 for librsync by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
</html>
